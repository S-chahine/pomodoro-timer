{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import Controls from'./Controls';import SessionLength from'./SessionLength';import BreakLength from'./BreakLength';import SessionTimer from'./SessionTimer';import'./Timer.css';import Beep from'../beep.mp4';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Timer(){const[isRunning,setIsRunning]=useState(false);const[sessionLength,setSessionLength]=useState(25);const[breakLength,setBreakLength]=useState(5);const[isPaused,setIsPaused]=useState(false);const[timeLeft,setTimeLeft]=useState(sessionLength*60);const[timerLabel,setTimerLabel]=useState('Session');const[resetKey,setResetKey]=useState(0);const[playBeep,setPlayBeep]=useState(false);const getNextTimerLength=useCallback(label=>label==='Break'?breakLength:sessionLength,[breakLength,sessionLength]);const playBeepSound=useCallback(()=>{const audio=new Audio(Beep);audio.play();},[]);useEffect(()=>{// Check if the timeLeft becomes 0 to play the beep sound\nif(timeLeft===0){setPlayBeep(true);}else{setPlayBeep(false);}},[timeLeft]);useEffect(()=>{if(playBeep){playBeepSound();}},[playBeep,playBeepSound]);useEffect(()=>{let intervalId;if(isRunning&&!isPaused){intervalId=setInterval(()=>{setTimeLeft(prevTime=>{if(prevTime===0){const nextTimerLabel=timerLabel==='Session'?'Break':'Session';setIsPaused(true);setIsRunning(false);setTimerLabel(nextTimerLabel);setResetKey(prevKey=>prevKey+1);return getNextTimerLength(nextTimerLabel)*60;}return prevTime-1;});},1000);}return()=>clearInterval(intervalId);},[isRunning,isPaused,timeLeft,sessionLength,breakLength,timerLabel,getNextTimerLength,resetKey]);const toggleTimer=()=>{setIsRunning(prevIsRunning=>{const newIsRunning=!prevIsRunning;setIsPaused(!newIsRunning);return newIsRunning;});};const resetTimer=()=>{setIsRunning(false);setIsPaused(false);setTimerLabel('Session');setResetKey(prevKey=>prevKey+1);setTimeLeft(sessionLength*60);};const incrementSession=()=>{setSessionLength(prevSessionLength=>{const newSessionLength=Math.min(prevSessionLength+1,60);if(!isRunning&&!isPaused&&timerLabel==='Session'){setTimeLeft(newSessionLength*60);}return newSessionLength;});};const decrementSession=()=>{setSessionLength(prevSessionLength=>{const newSessionLength=Math.max(prevSessionLength-1,1);if(!isRunning&&!isPaused&&timerLabel==='Session'){setTimeLeft(newSessionLength*60);}return newSessionLength;});};const incrementBreak=()=>{setBreakLength(prevBreakLength=>{const newBreakLength=Math.min(prevBreakLength+1,60);if(!isRunning&&!isPaused&&timerLabel==='Break'){setTimeLeft(newBreakLength*60);}return newBreakLength;});};const decrementBreak=()=>{setBreakLength(prevBreakLength=>{const newBreakLength=Math.max(prevBreakLength-1,1);if(!isRunning&&!isPaused&&timerLabel==='Break'){setTimeLeft(newBreakLength*60);}return newBreakLength;});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"Title\",children:\" Pomodoro Timer\"}),\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"TimerLabel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mt-5\",children:[/*#__PURE__*/_jsx(SessionLength,{sessionLength:sessionLength,incrementSession:incrementSession,decrementSession:decrementSession}),/*#__PURE__*/_jsx(BreakLength,{breakLength:breakLength,incrementBreak:incrementBreak,decrementBreak:decrementBreak})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center \",children:[/*#__PURE__*/_jsx(SessionTimer,{timeLeft:timeLeft,totalTime:getNextTimerLength(timerLabel)*60,isRunning:isRunning,reset:resetKey},resetKey),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"timer-label\",className:\"h4\",children:timerLabel}),/*#__PURE__*/_jsx(\"p\",{id:\"time-left\",className:\"h1\",children:\"\".concat(Math.floor(timeLeft/60).toString().padStart(2,'0'),\":\").concat((timeLeft%60).toString().padStart(2,'0'))})]}),/*#__PURE__*/_jsx(Controls,{toggleTimer:toggleTimer,resetTimer:resetTimer,isRunning:isRunning})]})]})})]});}export default Timer;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Controls","SessionLength","BreakLength","SessionTimer","Beep","jsx","_jsx","jsxs","_jsxs","Timer","isRunning","setIsRunning","sessionLength","setSessionLength","breakLength","setBreakLength","isPaused","setIsPaused","timeLeft","setTimeLeft","timerLabel","setTimerLabel","resetKey","setResetKey","playBeep","setPlayBeep","getNextTimerLength","label","playBeepSound","audio","Audio","play","intervalId","setInterval","prevTime","nextTimerLabel","prevKey","clearInterval","toggleTimer","prevIsRunning","newIsRunning","resetTimer","incrementSession","prevSessionLength","newSessionLength","Math","min","decrementSession","max","incrementBreak","prevBreakLength","newBreakLength","decrementBreak","children","className","totalTime","reset","id","concat","floor","toString","padStart"],"sources":["/home/sc/pomodoro-clock/pomo-clock-frontend/pomodoro-clock-app/src/components/Timer.js"],"sourcesContent":["\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Controls from './Controls';\nimport SessionLength from './SessionLength';\nimport BreakLength from './BreakLength';\nimport SessionTimer from './SessionTimer';\nimport './Timer.css';\nimport Beep from '../beep.mp4';\n\nfunction Timer() {\n    const [isRunning, setIsRunning] = useState(false);\n    const [sessionLength, setSessionLength] = useState(25);\n    const [breakLength, setBreakLength] = useState(5);\n    const [isPaused, setIsPaused] = useState(false);\n    const [timeLeft, setTimeLeft] = useState(sessionLength * 60);\n    const [timerLabel, setTimerLabel] = useState('Session');\n    const [resetKey, setResetKey] = useState(0);\n    const [playBeep, setPlayBeep] = useState(false);\n\n\n    const getNextTimerLength = useCallback(label => (label === 'Break' ? breakLength : sessionLength), [breakLength, sessionLength]);\n\n    const playBeepSound = useCallback(() => {\n        const audio = new Audio(Beep);\n        audio.play();\n    }, []);\n\n\n    useEffect(() => {\n        // Check if the timeLeft becomes 0 to play the beep sound\n        if (timeLeft === 0) {\n            setPlayBeep(true);\n        } else {\n            setPlayBeep(false);\n        }\n    }, [timeLeft]);\n\n    useEffect(() => {\n        if (playBeep) {\n            playBeepSound();\n        }\n    }, [playBeep, playBeepSound]);\n\n\n    useEffect(() => {\n        let intervalId;\n\n        if (isRunning && !isPaused) {\n            intervalId = setInterval(() => {\n                setTimeLeft(prevTime => {\n                    if (prevTime === 0) {\n                        const nextTimerLabel = timerLabel === 'Session' ? 'Break' : 'Session';\n                        setIsPaused(true);\n                        setIsRunning(false);\n                        setTimerLabel(nextTimerLabel);\n                        setResetKey(prevKey => prevKey + 1);\n                        return getNextTimerLength(nextTimerLabel) * 60;\n                    }\n                    return prevTime - 1;\n                });\n            }, 1000);\n        }\n\n        return () => clearInterval(intervalId);\n    }, [isRunning, isPaused, timeLeft, sessionLength, breakLength, timerLabel, getNextTimerLength, resetKey]);\n\n    const toggleTimer = () => {\n        setIsRunning(prevIsRunning => {\n            const newIsRunning = !prevIsRunning;\n            setIsPaused(!newIsRunning);\n            return newIsRunning;\n        });\n    };\n\n    const resetTimer = () => {\n        setIsRunning(false);\n        setIsPaused(false);\n        setTimerLabel('Session');\n        setResetKey(prevKey => prevKey + 1);\n        setTimeLeft(sessionLength * 60);\n    };\n\n    const incrementSession = () => {\n        setSessionLength(prevSessionLength => {\n            const newSessionLength = Math.min(prevSessionLength + 1, 60);\n            if (!isRunning && !isPaused && timerLabel === 'Session') {\n                setTimeLeft(newSessionLength * 60);\n            }\n            return newSessionLength;\n        });\n    };\n\n    const decrementSession = () => {\n        setSessionLength(prevSessionLength => {\n            const newSessionLength = Math.max(prevSessionLength - 1, 1);\n            if (!isRunning && !isPaused && timerLabel === 'Session') {\n                setTimeLeft(newSessionLength * 60);\n            }\n            return newSessionLength;\n        });\n    };\n\n    const incrementBreak = () => {\n        setBreakLength(prevBreakLength => {\n            const newBreakLength = Math.min(prevBreakLength + 1, 60);\n            if (!isRunning && !isPaused && timerLabel === 'Break') {\n                setTimeLeft(newBreakLength * 60);\n            }\n            return newBreakLength;\n        });\n    };\n\n    const decrementBreak = () => {\n        setBreakLength(prevBreakLength => {\n            const newBreakLength = Math.max(prevBreakLength - 1, 1);\n            if (!isRunning && !isPaused && timerLabel === 'Break') {\n                setTimeLeft(newBreakLength * 60);\n            }\n            return newBreakLength;\n        });\n    };\n\n    return (\n        <div>\n            <div>\n                <p className='Title'> Pomodoro Timer</p> </div>\n\n            <div className=\"container mt-5\">\n\n                <div className=\"TimerLabel\">\n\n                    <div className=\"col-md-6 mt-5\">\n                        <SessionLength\n                            sessionLength={sessionLength}\n                            incrementSession={incrementSession}\n                            decrementSession={decrementSession}\n                        />\n                        <BreakLength\n                            breakLength={breakLength}\n                            incrementBreak={incrementBreak}\n                            decrementBreak={decrementBreak}\n                        />\n                    </div>\n                    <div className=\"row justify-content-center \">\n                        <SessionTimer\n                            key={resetKey}\n                            timeLeft={timeLeft}\n                            totalTime={getNextTimerLength(timerLabel) * 60}\n                            isRunning={isRunning}\n                            reset={resetKey}\n                        />\n                        <div className=\"text-center mt-4\">\n                            <p id=\"timer-label\" className=\"h4\">\n                                {timerLabel}\n                            </p>\n                            <p id=\"time-left\" className=\"h1\">\n                                {`${Math.floor(timeLeft / 60).toString().padStart(2, '0')}:${(timeLeft % 60)\n                                    .toString()\n                                    .padStart(2, '0')}`}\n                            </p>\n                        </div>\n                        <Controls toggleTimer={toggleTimer} resetTimer={resetTimer} isRunning={isRunning} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Timer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}