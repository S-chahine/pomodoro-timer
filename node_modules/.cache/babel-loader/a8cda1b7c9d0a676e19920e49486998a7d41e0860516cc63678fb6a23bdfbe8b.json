{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import'./SessionTimer.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SessionTimer=_ref=>{let{timeLeft,totalTime,isRunning,reset}=_ref;const radius=70;const circumference=2*Math.PI*radius;const dashOffset=useRef(circumference);const startTimeRef=useRef(null);const[elapsedTime,setElapsedTime]=useState(0);useEffect(()=>{let intervalId;if(isRunning){intervalId=setInterval(()=>{const elapsedSeconds=elapsedTime+1;dashOffset.current=Math.max(circumference-circumference/totalTime*elapsedSeconds,0);if(elapsedSeconds<=totalTime){setElapsedTime(elapsedSeconds);}},1000);}else{clearInterval(intervalId);}return()=>clearInterval(intervalId);},[isRunning,elapsedTime,totalTime,circumference,reset]);useEffect(()=>{if(!isRunning){startTimeRef.current=null;dashOffset.current=Math.max(circumference-circumference/totalTime*elapsedTime,0);}},[isRunning,elapsedTime,totalTime,circumference,reset]);useEffect(()=>{if(reset){setElapsedTime(0);dashOffset.current=circumference;}},[reset]);return/*#__PURE__*/_jsxs(\"svg\",{width:\"150\",height:\"150\",viewBox:\"0 0 150 150\",className:\"session-timer\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"75\",cy:\"75\",r:radius,fill:\"transparent\",stroke:\"#007bff\",strokeWidth:\"10\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"75\",cy:\"75\",r:radius,fill:\"transparent\",stroke:\"#28a745\",strokeWidth:\"10\",strokeDasharray:circumference,strokeDashoffset:dashOffset.current,className:\"session-timer-progress\",style:{animationPlayState:isRunning?'running':'paused',animationDuration:\"\".concat(totalTime-elapsedTime,\"s\")}}),/*#__PURE__*/_jsxs(\"text\",{x:\"75\",y:\"85\",dominantBaseline:\"middle\",textAnchor:\"middle\",fontSize:\"25\",fill:\"yellow\",children:[Math.floor(timeLeft/60).toString().padStart(2,'0'),\":\",(timeLeft%60).toString().padStart(2,'0')]})]});};export default SessionTimer;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","SessionTimer","_ref","timeLeft","totalTime","isRunning","reset","radius","circumference","Math","PI","dashOffset","startTimeRef","elapsedTime","setElapsedTime","intervalId","setInterval","elapsedSeconds","current","max","clearInterval","width","height","viewBox","className","children","cx","cy","r","fill","stroke","strokeWidth","strokeDasharray","strokeDashoffset","style","animationPlayState","animationDuration","concat","x","y","dominantBaseline","textAnchor","fontSize","floor","toString","padStart"],"sources":["/home/sc/pomodoro-clock/pomo-clock-frontend/pomodoro-clock-app/src/components/SessionTimer.js"],"sourcesContent":["\nimport React, { useEffect, useRef, useState } from 'react';\nimport './SessionTimer.css';\n\nconst SessionTimer = ({ timeLeft, totalTime, isRunning, reset }) => {\n    const radius = 70;\n    const circumference = 2 * Math.PI * radius;\n    const dashOffset = useRef(circumference);\n    const startTimeRef = useRef(null);\n    const [elapsedTime, setElapsedTime] = useState(0);\n\n    useEffect(() => {\n        let intervalId;\n\n        if (isRunning) {\n            intervalId = setInterval(() => {\n                const elapsedSeconds = elapsedTime + 1;\n                dashOffset.current = Math.max(circumference - (circumference / totalTime) * elapsedSeconds, 0);\n\n                if (elapsedSeconds <= totalTime) {\n                    setElapsedTime(elapsedSeconds);\n                }\n            }, 1000);\n        } else {\n            clearInterval(intervalId);\n        }\n\n        return () => clearInterval(intervalId);\n    }, [isRunning, elapsedTime, totalTime, circumference, reset]);\n\n    useEffect(() => {\n        if (!isRunning) {\n            startTimeRef.current = null;\n            dashOffset.current = Math.max(circumference - (circumference / totalTime) * elapsedTime, 0);\n        }\n    }, [isRunning, elapsedTime, totalTime, circumference, reset]);\n\n    useEffect(() => {\n        if (reset) {\n            setElapsedTime(0);\n            dashOffset.current = circumference;\n        }\n    }, [reset]);\n\n    return (\n        <svg width=\"150\" height=\"150\" viewBox=\"0 0 150 150\" className=\"session-timer\">\n            <circle cx=\"75\" cy=\"75\" r={radius} fill=\"transparent\" stroke=\"#007bff\" strokeWidth=\"10\" />\n            <circle\n                cx=\"75\"\n                cy=\"75\"\n                r={radius}\n                fill=\"transparent\"\n                stroke=\"#28a745\"\n                strokeWidth=\"10\"\n                strokeDasharray={circumference}\n                strokeDashoffset={dashOffset.current}\n                className=\"session-timer-progress\"\n                style={{\n                    animationPlayState: isRunning ? 'running' : 'paused',\n                    animationDuration: `${totalTime - elapsedTime}s`,\n                }}\n            />\n            <text x=\"75\" y=\"85\" dominantBaseline=\"middle\" textAnchor=\"middle\" fontSize=\"25\" fill=\"yellow\">\n                {Math.floor(timeLeft / 60).toString().padStart(2, '0')}:{(timeLeft % 60).toString().padStart(2, '0')}\n            </text>\n        </svg>\n    );\n};\n\nexport default SessionTimer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}